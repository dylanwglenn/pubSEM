dem60 ~ ind60
dem65 ~ ind60 + dem60
# residual correlations
y1 ~~ y5
y2 ~~ y4 + y6
y3 ~~ y7
y4 ~~ y8
y6 ~~ y8
'
fit <- sem(model, data = PoliticalDemocracy)
parametertable(fit)
usethis::use_import_from("lavaan", "parametertable")
devtools::document()
devtools::document()
usethis::use_import_from("lavaan", "parametertable")
usethis::use_import_from("lavaan", "parameterestimates")
lavaan::standardizedsolution(fit)
usethis::use_import_from("lavaan", "standardizedsolution")
usethis::use_import_from("processx", "run")
parametertable(fit)
lavaan::standardizedsolution(fit)
lavaan::parameterestimates(fit)
df_paramTable <- lavaan::parametertable(fit)
if (standardized) {
df_estimates <- lavaan::standardizedsolution(fit)
est_col <- "est.std"
} else {
df_estimates <- lavaan::parameterestimates(fit)
est_col <- "est"
}
df_estimates <- lavaan::parameterestimates(fit)
est_col <- "est"
# organize into single data frame with desired columns
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
est_col,
"pvalue",
"ci.lower",
"ci.upper")]
df <- merge(df_paramTable_filtered, df_estimates_filtered)
View(df)
View(df)
usethis::use_import_from("jsonlite", "toJSON")
usethis::use_import_from("jsonlite", "write_json")
class(fit)
class(getwd())
getwd()
Sys.info()['sysname']
write_json(df, pretty = TRUE)
write_json(df, path = "/home/dylan/Downloads", pretty = TRUE)
write_json(df, path = "test.json", pretty = TRUE)
df_paramTable <- lavaan::parametertable(fit)
if (standardized) {
df_estimates <- lavaan::standardizedsolution(fit)
est_col <- "est.std"
} else {
df_estimates <- lavaan::parameterestimates(fit)
est_col <- "est"
}
df_estimates <- lavaan::standardizedsolution(fit)
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
est_col,
"pvalue",
"ci.lower",
"ci.upper")]
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
est_col,
"pvalue",
"ci.lower",
"ci.upper")]
est_col <- "est"
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
est_col,
"pvalue",
"ci.lower",
"ci.upper")]
est_col <- "est.std"
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
est_col,
"pvalue",
"ci.lower",
"ci.upper")]
# merge the two tables into one
df <- merge(df_paramTable_filtered, df_estimates_filtered)
# change problematic names
names(df)[names(df) == "ci.lower"] <- "ci_lower"
names(df)[names(df) == "ci.upper"] <- "ci_upper"
write_json(df, path = "test.json", pretty = TRUE)
df_paramTable <- lavaan::parametertable(fit)
df_estimates <- lavaan::parameterestimates(fit)
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
"est",
"pvalue",
"ci.lower",
"ci.upper")]
# merge the two tables into one
df <- merge(df_paramTable_filtered, df_estimates_filtered)
# change problematic names
names(df)[names(df) == "ci.lower"] <- "ci_lower"
names(df)[names(df) == "ci.upper"] <- "ci_upper"
write_json(df, path = "test.json", pretty = TRUE)
df_paramTable <- lavaan::parametertable(fit)
if (standardized) {
df_estimates <- lavaan::standardizedsolution(fit)
names(df_estimates)[names(df_estimates) == "est.std"] <- "est"
} else {
df_estimates <- lavaan::parameterestimates(fit)
}
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates <- lavaan::standardizedsolution(fit)
df_estimates <- lavaan::parameterestimates(fit)
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
"est",
"pvalue",
"ci.lower",
"ci.upper")]
# merge the two tables into one
df <- merge(df_paramTable_filtered, df_estimates_filtered)
# change problematic names
names(df)[names(df) == "ci.lower"] <- "ci_lower"
names(df)[names(df) == "ci.upper"] <- "ci_upper"
write_json(df, path = "test.json", pretty = TRUE)
model <- ' visual  =~ x1 + x2 + x3
textual =~ x4 + x5 + x6
speed   =~ x7 + x8 + x9 '
fit <- cfa(model, data = HolzingerSwineford1939)
df_paramTable <- lavaan::parametertable(fit)
df_estimates <- lavaan::parameterestimates(fit)
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
"est",
"pvalue",
"ci.lower",
"ci.upper")]
# merge the two tables into one
df <- merge(df_paramTable_filtered, df_estimates_filtered)
# change problematic names
names(df)[names(df) == "ci.lower"] <- "ci_lower"
names(df)[names(df) == "ci.upper"] <- "ci_upper"
write_json(df, path ="test.json", pretty = TRUE)
edit_path_diagram(fit, false, "test")
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
gui_exec_path <- system.file("inst", "bin","diagram_gui", package = "pubSEM")
print(gui_exec_path)
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
edit_path_diagram(fit, FALSE, "test")
remotes::install_github("dylanwglenn/pubSEM")
remotes::install_github("dylanwglenn/pubSEM")
rm(list=ls())
library(MASS)
library(tidyr)
library(ggplot2); theme_set(theme_bw())
library(haven)
library(texreg)
library(dplyr)
library(data.table)
library(survey)
options(survey.adjust.domain.lonely=TRUE)
options(survey.lonely.psu="adjust")
library(questionr)
library(stringr)
library(plm)
library(lavaan)
library(modsem)
library(blavaan)
library(lavaangui)
library(gt)
library(factoextra)
library(future)
future::plan("multicore")
#### LOAD DATA TABLE ####
source("data/nlsy_research_sem.R")
#### LOAD DATA TABLE ####
source("data/nlsy_research_sem.R")
library(lavaan)
library(pubSEM)
model <- '
# measurement model
ind60 =~ x1 + x2 + x3
dem60 =~ y1 + y2 + y3 + y4
dem65 =~ y5 + y6 + y7 + y8
# regressions
dem60 ~ ind60
dem65 ~ ind60 + dem60
# residual correlations
y1 ~~ y5
y2 ~~ y4 + y6
y3 ~~ y7
y4 ~~ y8
y6 ~~ y8
'
fit <- sem(model, data = PoliticalDemocracy)
semGui(fit)
#### SETUP ####
rm(list=ls())
library(MASS)
library(tidyr)
library(ggplot2); theme_set(theme_bw())
library(haven)
library(texreg)
library(dplyr)
library(data.table)
library(survey)
options(survey.adjust.domain.lonely=TRUE)
options(survey.lonely.psu="adjust")
library(questionr)
library(stringr)
library(plm)
library(lavaan)
library(modsem)
library(blavaan)
library(lavaangui)
library(gt)
library(factoextra)
library(future)
library(pubSEM)
future::plan("multicore")
#### LOAD DATA TABLE ####
source("data/nlsy_research_sem.R")
library(lavaan)
library(pubSEM)
model <- '
# measurement model
ind60 =~ x1 + x2 + x3
dem60 =~ y1 + y2 + y3 + y4
dem65 =~ y5 + y6 + y7 + y8
# regressions
dem60 ~ ind60
dem65 ~ ind60 + dem60
# residual correlations
y1 ~~ y5
y2 ~~ y4 + y6
y3 ~~ y7
y4 ~~ y8
y6 ~~ y8
'
fit <- sem(model, data = PoliticalDemocracy)
pubSEM::semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
load("~/Documents/school/research_seminar/test_fit.rds")
readRDS("~/Documents/school/research_seminar/test_fit.rds")
fit <- readRDS("~/Documents/school/research_seminar/test_fit.rds")
semGui(fit)
df_estimates <- lavaan::parameterestimates(fit)
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
"est",
"pvalue",
"ci.lower",
"ci.upper")]
# merge the two tables into one
df <- merge(df_paramTable_filtered, df_estimates_filtered)
df_paramTable <- lavaan::parametertable(fit)
df_estimates <- lavaan::parameterestimates(fit)
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
"est",
"pvalue",
"ci.lower",
"ci.upper")]
# merge the two tables into one
df <- merge(df_paramTable_filtered, df_estimates_filtered)
# change problematic names
names(df)[names(df) == "ci.lower"] <- "ci_lower"
names(df)[names(df) == "ci.upper"] <- "ci_upper"
usr_data_dir <- tools::R_user_dir("pkg", which = "data")
base_dir <- paste0(usr_data_dir, "/pubSEM/")
file_path <- paste0(base_dir, "temp.json")
write_json(df, path = file_path, pretty = TRUE)
library(jsonlite)
write_json(df, path = file_path, pretty = TRUE)
write_json(df, path = "", pretty = TRUE)
write_json(df, pretty = TRUE)
write_json(df, getwd(), pretty = TRUE)
fit <- readRDS("~/Documents/school/research_seminar/test_fit.rds")
df_paramTable <- lavaan::parametertable(fit)
df_estimates <- lavaan::parameterestimates(fit)
# select desired columns from fit data
df_paramTable_filtered <- df_paramTable[, c("lhs",
"op",
"rhs",
"user",
"label",
"group")]
df_estimates_filtered <- df_estimates[, c("lhs",
"op",
"rhs",
"est",
"pvalue",
"ci.lower",
"ci.upper")]
# merge the two tables into one
df <- merge(df_paramTable_filtered, df_estimates_filtered)
# change problematic names
names(df)[names(df) == "ci.lower"] <- "ci_lower"
names(df)[names(df) == "ci.upper"] <- "ci_upper"
jsonlite::write_json(df, "test.json", pretty=TRUE)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
semGui(fit)
str <- "asdfasdfhaskj"
str[4]
# get the last n characters from a string
string_end <- function(x, n) {
substr(x, nchar(x)-n+1, nchar(x))
}
string_end("aslfkjahsfdksahfd.pdf",4)
string_end("df",4)
"slfdsldkfhlkfdhlksahd" + ".pdf"
devtools::load_all()
tools::R_user_dir("pubSEM", which = "data")
devtools::load_all()
#' Export a pubSEM project to PDF
#'
#' @param project_name a string denoting the pubSEM project to export
#' @param filename a string specifying the name of the exported pdf
#' @returns nothing
#' @export
export_diagram -> function(project, filename, wd = getwd()) {
base_dir <- tools::R_user_dir("pubSEM", which = "data")
file_path <- file.path(c(base_dir, paste(project, ".json")))
if (string_end(filename, 4) != ".pdf") {
filename <- paste0(filename,".pdf")
}
filepath <- file.path(c(wd, filename))
if (Sys.info()['sysname'] == "Windows") {
gui_exec_path <- system.file("bin", "sem_gui.exe", package = "pubSEM", mustWork = TRUE)
} else {
gui_exec_path <- system.file("bin", "sem_gui", package = "pubSEM", mustWork = TRUE)
}
# run the GUI executable
system2(gui_exec_path,
args = c(base_dir, project_name, "export", filepath)
)
}
semGui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
tools::R_user_dir("pubSEM", which = "data")
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit)
sem_gui(fit, "test_proj")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
class(getwd())
export_diagram("test_proj", "test", "/home/dylan/Desktop")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
tools::R_user_dir("pubSEM", which = "data")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
sem_gui(fit, "test_proj")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
library(lavaan)
library(pubSem)
library(pubSEM)
sem_gui(fit, "test_proj")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
delete_project("test_proj")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
sem_gui(fit, "test_proj")
sem_gui(fit, "test_proj")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
export_diagram("test_proj", "test", "/home/dylan/Desktop")
usethis::use_github_action(name = "check-standard", badge = TRUE)
fit <- readRDS("~/Documents/school/research_seminar/test_fit.rds")
sem_plot(fit, "test")
sem_gui(fit, "test")
pubSEM::get_layout_directory()
